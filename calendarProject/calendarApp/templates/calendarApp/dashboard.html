{% extends "base.html" %}
{% load static %}
{% load tz %}  {# for timezone support if needed #}
{% now "Y-m-d" as today_date %}  {# get today's date in template #}

{% block content %}
<div class="container">
    <!-- Calendar Section (75%) -->
    <div class="calendar-section">
        <h2>{{ month }} {{ year }}</h2>
        <table class="calendar-table">
            <thead>
                <tr>
                    <th>Sun</th><th>Mon</th><th>Tue</th>
                    <th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th>
                </tr>
            </thead>
            <tbody>
                {% for week in calendar_weeks %}
                    <tr>
                        {% for day in week %}
                            {% with day_date=day.date|stringformat:"Y-m-d" %}
                                <td class="{% if not day.current_month %}other-month {% endif %}{% if day.is_today %}today{% endif %}">
                                    {{ day.day }}
                                </td>
                            {% endwith %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Widgets Section (25%) -->
    <div class="widgets-section">
        {% for widget in rendered_widgets %}
            <div class="widget">
                {{ widget|safe }}
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}